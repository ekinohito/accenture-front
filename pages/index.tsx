import { AppBar, Button, CircularProgress, Container, ScopedCssBaseline, Stack, Toolbar, Typography } from '@mui/material'
import { Box } from '@mui/system'
import type { NextPage } from 'next'
import Head from 'next/head'
import Image from 'next/image'
import { useState } from 'react'

const Home: NextPage = () => {
  const [frameSrc, setFrameSrc] = useState("/placeholder.png")
  const [frameStatus, setFrameStatus] = useState<"ok" | "pending" | "error">("ok")
  return (
    <ScopedCssBaseline>
      <Head>
        <title>Create Next App</title>
        <meta name="description" content="Generated by create next app" />
        <link rel="icon" href="/favicon.ico" />
      </Head>
      <AppBar position="sticky">
        <Container>
          <Toolbar>
            <Typography variant="h2">Accenture</Typography>
          </Toolbar>
        </Container>
      </AppBar> 
      <Container>
        <Stack spacing={2} marginTop={4} alignItems="center">
          <Typography variant="h2">Кадры</Typography>
          <Box position="relative">
            <Image width={600} height={450} src={frameSrc} alt="frame" onLoad={() => setFrameStatus("ok")} onError={() => setFrameStatus("error")}/>
            <Box
            position="absolute" 
            top="0" 
            left="0" 
            width="100%" 
            height="100%" 
            display={frameStatus === "pending" ? "grid" : "none"}
            alignContent="center" 
            justifyContent="center" 
            sx={{backdropFilter: "blur(4px)"}}><CircularProgress/></Box>
            
          </Box>
          <Button variant="outlined" onClick={() => { setFrameSrc(`https://loremflickr.com/600/450?random=${Math.random()}`); setFrameStatus("pending")}}>Обновить изображение</Button>
        </Stack>
      </Container>
    </ScopedCssBaseline>
  )
}

export default Home
