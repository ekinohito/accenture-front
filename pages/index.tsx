import { AppBar, Button, CircularProgress, Container, createTheme, Divider, Drawer, Grid, IconButton, Link, ScopedCssBaseline, Stack, Toolbar, Typography } from '@mui/material'
import { Box, ThemeProvider } from '@mui/system'
import { Menu, ArrowLeft } from '@mui/icons-material'
import type { NextPage } from 'next'
import Head from 'next/head'
import Image from 'next/image'
import { useState } from 'react'

const theme = createTheme({
  palette: {
    primary: {
      main: "#aa10fe"
    }
  },
  typography: {
    fontFamily: 'Montserrat,"Arial","Sans-Serif"'
  }
})

const Home: NextPage = () => {
  const [frameSrc, setFrameSrc] = useState("/placeholder.png")
  const [frameStatus, setFrameStatus] = useState<"ok" | "pending" | "error">("ok")
  const [isMenuOpen, setIsMenuOpen] = useState(false)
  return (
    <ScopedCssBaseline>
      <ThemeProvider theme={theme}>
        <Head>
          <title>5 Денег</title>
          <meta name="description" content="Generated by create next app" />
          <link rel="icon" href="/favicon.ico" />
        </Head>
        <AppBar position="sticky">
          <Container>
            <Toolbar>
              <IconButton onClick={() => setIsMenuOpen(isOpen => !isOpen)}>
                <Menu />
              </IconButton>
              <Typography variant="h4">Accenture</Typography>
            </Toolbar>
          </Container>
        </AppBar> 
        <Drawer variant="persistent" open={isMenuOpen}>
          <IconButton sx={{alignSelf: "end"}} onClick={() => setIsMenuOpen(false)}>
            <ArrowLeft />
          </IconButton>
          <Divider sx={{minWidth: "300px"}}/>
          <Stack spacing={1} margin={4}>
            <Link variant="h5" href="#">Зона А</Link>
            <Link variant="h5">Зона Б</Link>
            <Link variant="h5">Зона В</Link>
            <Link variant="h5">Галлерея</Link>
          </Stack>
        </Drawer>
        <Container>
          <Grid>

          <Stack spacing={2} marginTop={4} alignItems="center">
            <Typography variant="h2">Кадры</Typography>
            <Box position="relative">
              <Image width={600} height={450} src={frameSrc} alt="frame" onLoad={() => setFrameStatus("ok")} onError={() => setFrameStatus("error")}/>
              <Box
              position="absolute" 
              top="0" 
              left="0" 
              width="100%" 
              height="100%" 
              display={frameStatus === "pending" ? "grid" : "none"}
              alignContent="center" 
              justifyContent="center" 
              sx={{backdropFilter: "blur(4px)"}}><CircularProgress/></Box>
              
            </Box>
            <Button 
              variant="contained"
              size="large"
              onClick={() => { setFrameSrc(`https://loremflickr.com/600/450?random=${Math.random()}`); setFrameStatus("pending")}}>
              Обновить изображение
            </Button>
            <Button 
              variant="contained"
              size="large"
              onClick={() => { setFrameSrc(`https://loremflickr.com/600/450?random=${Math.random()}`); setFrameStatus("pending")}}>
              Сделать снимок
            </Button>
            <Button 
              variant="contained"
              color="error"
              size="large"
              onClick={() => { setFrameSrc(`https://loremflickr.com/600/450?random=${Math.random()}`); setFrameStatus("pending")}}>
              Брак
            </Button>
          </Stack>
          </Grid>
        </Container>
      </ThemeProvider>
    </ScopedCssBaseline>
  )
}

export default Home
